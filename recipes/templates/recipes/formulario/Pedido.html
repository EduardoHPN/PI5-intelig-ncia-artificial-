{% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pedido de Defesa Penal</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f4f6f8;
      font-family: 'Segoe UI', sans-serif;
      padding-top: 40px;
    }

    .form-container {
      max-width: 900px;
      margin: auto;
      background-color: #ffffff;
      padding: 35px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    }

    h2 {
      font-size: 1.75rem;
      font-weight: 600;
      margin-bottom: 30px;
      color: #333;
    }

    .accordion-button {
      background-color: #f1f1f1;
      color: #333;
      font-weight: 600;
      border: none;
      border-radius: 12px !important;
      transition: background-color 0.3s ease;
    }

    .accordion-button:hover {
      background-color: #e0e0e0;
    }

    .accordion-button:not(.collapsed) {
      background-color: #e0e0e0;
      color: #000;
      box-shadow: none;
    }

    .accordion-item {
      border: none;
      border-radius: 12px;
      margin-bottom: 15px;
      overflow: hidden;
      background-color: #f9f9f9;
    }

    .accordion-body {
      padding: 20px;
    }

    .form-label {
      font-weight: 600;
    }

    .form-control,
    textarea {
      border-radius: 10px;
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
      border: 1px solid #ccc;
    }

    .form-control:focus,
    textarea:focus {
      border-color: #999;
      box-shadow: 0 0 6px rgba(0, 0, 0, 0.1);
    }

    .form-check-label {
      font-weight: 500;
      margin-left: 8px;
    }

    .form-check {
      margin-bottom: 16px;
    }

    .required-label::after {
      content: "*";
      color: red;
      margin-left: 4px;
    }

    .btn-primary {
      background-color: #4a69bd;
      border-color: #4a69bd;
      border-radius: 10px;
      padding: 10px;
      font-weight: 600;
    }

    .btn-primary:hover {
      background-color: #3b5998;
      border-color: #3b5998;
    }

    .progress-container {
      max-width: 900px;
      margin: 30px auto 0;
    }

    .progress-bar {
      border-radius: 20px;
      background-color: #4a69bd !important;
    }
  </style>
</head>

<body>
  <div class="form-container">
    <h2 class="text-center">üìÑ Pedido de Defesa Penal</h2>

    <form method="POST" novalidate>
      {% csrf_token %}

      <div class="accordion" id="accordionPedido">
        <!-- Pedido Principal -->
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1" aria-expanded="true">
              üìå Pedido Principal e Fundamenta√ß√£o
            </button>
          </h2>
          <div id="collapse1" class="accordion-collapse collapse show" data-bs-parent="#accordionPedido">
            <div class="accordion-body">
              {{ form.pedido_principal|as_crispy_field }}
              {{ form.outro_pedido_principal|as_crispy_field }}
              <div class="form-check my-2">
                {{ form.incluir_absolvicao_como_alternativa }}
                <label class="form-check-label" for="{{ form.incluir_absolvicao_como_alternativa.id_for_label }}">
                  Incluir pedido de absolvi√ß√£o como alternativa
                </label>
              </div>
              <label class="form-label mt-3">Fundamentos para absolvi√ß√£o:</label>
              {{ form.fundamentos_absolvicao }}
              {{ form.outro_fundamento_absolvicao|as_crispy_field }}
            </div>
          </div>
        </div>

        <!-- Situa√ß√£o Prisional -->
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2">
              üëÆ Situa√ß√£o Prisional
            </button>
          </h2>
          <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#accordionPedido">
            <div class="accordion-body">
              <div class="form-check">
                {{ form.esta_preso }}
                <label class="form-check-label" for="{{ form.esta_preso.id_for_label }}">
                  R√©u encontra-se preso?
                </label>
              </div>
              <div class="form-check">
                {{ form.solicitar_alvara }}
                <label class="form-check-label" for="{{ form.solicitar_alvara.id_for_label }}">
                  Solicitar alvar√° de soltura?
                </label>
              </div>
              <div class="form-check">
                {{ form.pedir_medidas_cautelares }}
                <label class="form-check-label" for="{{ form.pedir_medidas_cautelares.id_for_label }}">
                  Substitui√ß√£o por medidas cautelares?
                </label>
              </div>
              {{ form.medidas_cautelares|as_crispy_field }}
            </div>
          </div>
        </div>

        <!-- Pedidos Subsidi√°rios -->
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3">
              ‚öñÔ∏è Pedidos Subsidi√°rios e Complementares
            </button>
          </h2>
          <div id="collapse3" class="accordion-collapse collapse" data-bs-parent="#accordionPedido">
            <div class="accordion-body">
              <div class="form-check">
                {{ form.incluir_pedido_subsidiario }}
                <label class="form-check-label" for="{{ form.incluir_pedido_subsidiario.id_for_label }}">
                  Incluir pedido subsidi√°rio
                </label>
              </div>
              {{ form.pedido_subsidiario|as_crispy_field }}
              <div class="form-check">
                {{ form.requerer_nao_recebimento_denuncia }}
                <label class="form-check-label" for="{{ form.requerer_nao_recebimento_denuncia.id_for_label }}">
                  Requerer o n√£o recebimento da den√∫ncia
                </label>
              </div>
              <div class="form-check">
                {{ form.requerer_prioridade }}
                <label class="form-check-label" for="{{ form.requerer_prioridade.id_for_label }}">
                  Prioridade na tramita√ß√£o?
                </label>
              </div>
              <div class="form-check">
                {{ form.requerer_acesso_provas }}
                <label class="form-check-label" for="{{ form.requerer_acesso_provas.id_for_label }}">
                  Acesso a dilig√™ncias ou provas?
                </label>
              </div>
              {{ form.quais_provas|as_crispy_field }}
            </div>
          </div>
        </div>

        <!-- Observa√ß√µes Finais -->
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4">
              üìù Observa√ß√µes Finais
            </button>
          </h2>
          <div id="collapse4" class="accordion-collapse collapse" data-bs-parent="#accordionPedido">
            <div class="accordion-body">
              {{ form.outros_pedidos|as_crispy_field }}
            </div>
          </div>
        </div>
      </div>

      <button type="submit" class="btn btn-primary mt-4 w-100">Salvar Pedido</button>
    </form>
  </div>

  <div class="progress-container">
    <div class="progress">
      <div class="progress-bar" role="progressbar" style="width: 80%;" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  {% load static %}
  <script src="{% static 'js/form-salvar.js' %}"></script>
</body>
</html>
